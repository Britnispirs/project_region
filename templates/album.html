{% extends "base.html" %}
{% block content %}
  <a href="{{ url_for('artist_page', artist_id=album.artist_id) }}">‚Üê –ö –∞—Ä—Ç–∏—Å—Ç—É</a>
  <h2>{{ album.title }}</h2>
  <p><strong>–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:</strong> {{ album.artist_name }}</p>
  <p><strong>–ñ–∞–Ω—Ä:</strong> {{ album.genre_name or "‚Äî" }}</p>
  <p><strong>–ì–æ–¥:</strong> {{ album.year or "‚Äî" }}</p>

  <div class="card">
    <h3>–î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–µ–∫</h3>
    <form action="{{ url_for('add_track') }}" method="post">
      <input type="hidden" name="album_id" value="{{ album.id }}">
      <input name="title" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç—Ä–µ–∫–∞" required>
      <input name="track_number" placeholder="–ù–æ–º–µ—Ä —Ç—Ä–µ–∫–∞ (—á–∏—Å–ª–æ)">
      <input name="duration" placeholder="–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (mm:ss)">
      <button type="submit">–î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–µ–∫</button>
    </form>
  </div>

  <h3>–¢—Ä–µ–∫–∏</h3>
  {% if tracks %}
    <table>
      <tr><th>#</th><th>–ù–∞–∑–≤–∞–Ω–∏–µ</th><th>üïê</th></tr>
      {% for t in tracks %}
      <tr>
        <td>{{ t.track_number or loop.index }}</td>
        <td>{{ t.title }}</td>
        <td>{{ t.duration or "-" }}</td>
        <td>
          <form class="inline" action="{{ url_for('playlist_add') }}" method="post">
            <input type="hidden" name="track_id" value="{{ t.id }}">
            <input type="hidden" name="album_id" value="{{ album.id }}">
            <button type="submit">‚ù§</button>
          </form>
        </td>
        <td>
          <form action="{{ url_for('delete_track', track_id=t.id, album_id=album.id) }}" method="POST" style="display:inline;">
            <button type="submit" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —Ç—Ä–µ–∫?')">√ó</button>
          </form>
        </td>
        </tr>
      {% endfor %}
  </table>

  {% else %}
    <p>–¢—Ä–µ–∫–æ–≤ –Ω–µ—Ç.</p>
  {% endif %}
{% endblock %}
